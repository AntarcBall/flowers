추가해주신 구체적인 매커니즘을 반영하여, **[3인칭 우주: 어휘 항해와 정원]**의 전체 시스템 설계를 최종적으로 정리해 드립니다.

이 설계안은 AI가 코드를 생성할 때 발생할 수 있는 '자의적 해석'을 방지하기 위한 기술 명세서 역할을 합니다.

---

## 🌌 1. 우주 공간: 원뿔형 선택 및 렌더링 시스템

가장 큰 변화는 '클릭'이 아닌 **'조준(Aiming)'** 기반의 선택 시스템입니다.

### A. 원뿔 조준 알고리즘 (Cone Selection)

* **꼭짓점:** 우주선의 현재 위치 .
* **축(Axis):** 우주선의 속도 벡터 .
* **판정 로직:** 우주선에서 각 별()로 향하는 벡터 를 구한 뒤, 두 벡터 사이의 각도 가 임계값 이내인지 확인합니다.
* 수식: 


* **디버그 바(Debug Bar):** 화면 최하단에 위치하며, 이 원뿔의 와이어프레임(Wireframe) 표시 여부를 토글할 수 있습니다.

### B. 시각적 피드백 (Visual Feedback)

* **선택 표시 (Selection Marker):** 원뿔 내에 들어온 별들 중 가장 유사도가 높거나 가까운 대상 위에 **하얀색 화살표**가 실시간으로 렌더링됩니다.
* **가변 텍스트 렌더링 (LOD Text):** * 평소에는 별(구체)만 보입니다.
* 우주선과 별의 거리  일 때만 별 중심에 **검은색 한글 단어**가 나타납니다.
* 이는 `CSS2DRenderer`를 사용하거나, 카메라를 항상 바라보는 `Sprite` 텍스트로 구현합니다.



---

## 🏡 2. 정원 페이지: 레이아웃 및 인터랙션

우주에서 선택을 완료(마우스 클릭)하면 전환되는 페이지입니다.

### A. 환경 설정 및 바닥 (Environment)

* **배경:** 완전한 검은색 (Black Background).
* **바닥:** 흰색 평면 (White Floor).
* **시점:** 위에서 아래를 내려다보는 Bird-eye view (Orthographic).

### B. 미리보기 UI (Preview Display)

* **위치:** 화면 오른쪽 아래 (Bottom-Right).
* **크기:** 화면 세로 높이의 **15%**를 차지하는 독립된 DIV 영역.
* **내용:** 현재 선택된 단어에 해당하는 꽃의 3D 모델을 크게 보여줍니다. 우주에서 정원으로 넘어온 직후, 심기 전에 사용자가 결과를 미리 확인할 수 있는 공간입니다.

---

## 🛠 3. 기술 스택 및 데이터 흐름 업데이트

| 구분 | 세부 내용 |
| --- | --- |
| **선택 시스템** | 우주선 전방 원뿔(Cone) 내 충돌 검사 + 하얀 화살표 메쉬 |
| **텍스트 관리** | 거리 기반 거리 가시성(Distance-based Visibility) 제어 + 한글 폰트 적용 |
| **정원 UI** | HTML/CSS Overlay (15vh 높이의 Preview 창) |
| **물리** | 100% 관성 이동 + 경계 이탈 시 중앙 워프 |
| **매핑** | 3D 좌표  5개 꽃 파라미터 (Surjective Mapping) |

---

## 📝 최종 워크플로우 (Summary)

1. **항해:** 사용자가 WASD로 우주선을 조종합니다 (100% 관성).
2. **조준:** 우주선의 진행 방향(속도 벡터)을 축으로 하는 원뿔 안에 별이 들어오면 **하얀 화살표**가 표시됩니다.
3. **식별:** 별에 가까이 다가가면 별 중심에 **검은색 단어**가 나타납니다.
4. **선택:** 원하는 단어를 조준한 상태에서 **마우스를 클릭**합니다.
5. **전환:** 우주가 사라지고 **검은 배경/흰 바닥의 정원**이 나타납니다.
6. **확인:** 우측 하단 **15% 크기의 미리보기 창**에서 생성될 꽃을 확인합니다.
7. **심기:** 정원 바닥을 클릭하여 꽃을 영구적으로 배치합니다.

---

이제 모든 기획적 누락 요소가 정리되었습니다.

**"가장 먼저 구현이 까다로운 '우주선의 속도 벡터를 축으로 하는 원뿔 조준 시스템' 코드를 먼저 작성해 드릴까요? 아니면 '거리 기반 한글 단어 렌더링' 부분부터 시작할까요?"**